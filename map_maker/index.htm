<!DOCTYPE html>
<html>
	<head>
		<title>Map Maker</title>

		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto" />
		<link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" />
		<link rel="stylesheet" href="js/colpick/colpick.css" type="text/css"/>

		<link rel="stylesheet" href="images/bootstrap-icons/bootstrap-icons.css">
		<link rel="stylesheet" type="text/css" href="map_maker.css" />
		<link rel="icon" type="image/x-icon" href="images/favicon.ico" />

		<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.js"></script>
		<script type="text/javascript" src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
		<script type="text/javascript" src="js/colpick/colpick.js"></script>

		<script type="text/javascript" src="js/data.js"></script>
		<script type="text/javascript" src="js/project.js"></script>
		<script type="text/javascript" src="js/maps.js"></script>
		<script type="text/javascript" src="js/sprites.js"></script>
		
		<script type="text/javascript">
			/* Store the currently selected sprite */
			var selected_sprite = new Object();
			selected_sprite.sprite = false;
			selected_sprite.group = false;

			/* Store the sprite state */
			selected_sprite.sprite_reverse_x = false;
			selected_sprite.sprite_reverse_y = false;

			/* Store tile information */
			selected_sprite.can_walk = [true, true, true, true];
			selected_sprite.exit_tile = false;
			selected_sprite.exit_map_id = false;
			selected_sprite.exit_map_dir = [0, 0];
			selected_sprite.exit_map_pos = [0, 0];

			/* Store current map info */
			var selected_map = false;
			var map_cell_size = 10;

			/* Store drawing information */
			var drawing_functions = false;

			/* Store map resizing information */
			var map_resizing = new Object();
			map_resizing.en = false;
			map_resizing.new_width = 0;
			map_resizing.new_height = 0;
			
			/* Document load */
			$( function() {

				/* Load project view */
				load_project_view();

			} );

		</script>
	</head>
	<body>
		<div id="container">
			<div id="sidebar">
				<div id="sprite_editor">
				</div>
				<div id="sprite_list_toolbar">
					<div id="toolbar_left">
						<i class="bi-folder-plus" id="toolbar_new_group" func="new-group"></i>
						<i class="bi-plus-square-fill" id="toolbar_new_sprite" func="new"></i>
						<i class="bi-arrow-left" id="toolbar_back" func="back"></i>
					</div>
					<div id="toolbar_right">
						<i class="bi-type" func="rename"></i>
						<i class="bi-back" func="duplicate"></i>
						<i class="bi-trash" func="delete"></i>
					</div>
				</div>
				<div id="sprite_list_toolbar_rename">
					<input type="text" id="sprite_rename" />
				</div>
				<div id="sprite_list_toolbar_delete">
					<input type="button" id="sprite_delete_y" value="Confirm" />
					<input type="button" id="sprite_delete_n" value="Cancel"  />
				</div>
				<div id="sprite_list">
					<ul class="sortable">
					</ul>
				</div>
			</div>

			<div id="content">
				<div id="toolbar">
					<div id="settings">
						<div id="controls">
							<i class="bi-plus-square-fill project_functions" func="new"></i>
							<i class="bi-cloud-upload-fill project_functions" func="open"></i>
							<i class="bi-cloud-download-fill project_functions " func="download"></i>
							<i class="bi-file-earmark-code-fill project_functions" func="export"></i>
							<i class="bi-arrow-left map_editing_functions" func="close-map"></i>
							<i class="bi-type map_editing_functions" func="rename-map"></i>
							<i class="bi-back map_editing_functions" func="duplicate-map"></i>
							<i class="bi-trash map_editing_functions" func="trash-map"></i>
							<div class="toolbar_separator map_editing_functions"></div>
							<i class="bi-x-square map_editing_functions" func="clear"></i>
							<i class="bi-aspect-ratio-fill map_editing_functions" func="resize-canvas"></i>
							<div class="toolbar_separator map_editing_functions"></div>
							<i class="bi-zoom-in map_editing_functions" func="zoom-in"></i>
							<i class="bi-zoom-out map_editing_functions" func="zoom-out"></i>
							<div class="toolbar_separator map_editing_functions"></div>
							<i class="bi-brush-fill map_editing_functions" id="map_toolbar_paint" func="paint"></i>
							<i class="bi-eraser-fill map_editing_functions" id="map_toolbar_erase" func="erase"></i>
							<i class="bi-paint-bucket map_editing_functions" id="map_toolbar_fill" func="fill"></i>
							<i class="bi-symmetry-horizontal map_editing_functions" id="map_toolbar_flip_h" func="flip-h"></i>
							<i class="bi-symmetry-vertical map_editing_functions" id="map_toolbar_flip_v" func="flip-v"></i>
						</div>
						<div id="name_input_container">
							<input type="text" id="name_input" placeholder="" />
						</div>
						<div id="map_confirm">
							<label id="map_confirm_prompt"></label>
							<input type="button" id="map_confirm_y" value="Confirm" />
							<input type="button" id="map_confirm_n" value="Cancel"  />
							<input type="button" id="map_done" value="Done"  />
						</div>
					</div>
					<div id="map_paint_preview"></div>
					<div id="map_paint_settings">
						<div id="map_paint_settings_l">
							<div id="map_exit_tile_en">
								<label for="exit_tile_en" class="exit_ignore_hide">Exit Tile</label>
								<input type="checkbox" id="exit_tile_en" name="exit_tile_en" class="checkbox-input exit_ignore_hide" />
								<label for="exit_tile_map_id">Map ID</label>
								<input type="text" id="exit_tile_map_id" name="exit_tile_map_id" class="text-input" placeholder="ID" />
							</div>
							<div id="map_exit_tile_dir">
								<label for="exit_tile_n" class="exit_ignore_hide">N</label>
								<input type="checkbox" id="exit_tile_n" name="exit_tile_n" class="checkbox-input exit_ignore_hide dir_en_checkbox" checked="checked" />
								<label for="exit_tile_e" class="exit_ignore_hide">E</label>
								<input type="checkbox" id="exit_tile_e" name="exit_tile_e" class="checkbox-input exit_ignore_hide dir_en_checkbox" checked="checked" />
								<label for="exit_tile_s" class="exit_ignore_hide">S</label>
								<input type="checkbox" id="exit_tile_s" name="exit_tile_s" class="checkbox-input exit_ignore_hide dir_en_checkbox" checked="checked" />
								<label for="exit_tile_w" class="exit_ignore_hide">W</label>
								<input type="checkbox" id="exit_tile_w" name="exit_tile_w" class="checkbox-input exit_ignore_hide dir_en_checkbox" checked="checked" />
							</div>
						</div>
						<div id="map_paint_settings_r">
							<div id="map_exit_tile_pos">
								<label for="exit_tile_map_pos_x">Pos</label>
								<input type="text" id="exit_tile_map_pos_x" name="exit_tile_map_pos_x" class="text-input" placeholder="x" />
								<input type="text" id="exit_tile_map_pos_y" name="exit_tile_map_pos_y" class="text-input" placeholder="y" />
							</div>
							<div id="map_exit_tile_dir">
								<label for="exit_tile_map_dir">Dir</label>
								<select name="exit_tile_map_dir" id="exit_tile_map_dir" class="select-input">
									<option value="a" selected="selected">Any</option>
									<option value="n">North</option>
									<option value="e">East</option>
									<option value="s">South</option>
									<option value="w">West</option>
								</select>
							</div>
						</div>
					</div>
					<div id="map_size_settings">
						<div id="cols">
							<label for="map_cols">Width</label>
							<input type="number" id="map_cols" name="map_cols" value="" min="3" max="40" onKeyDown="return false" />
						</div>
						<div id="rows">
							<label for="map_rows">Height</label>
							<input type="number" id="map_rows" name="map_rows" value="" min="3" max="40" onKeyDown="return false" />
						</div>
					</div>
				</div>
				<div id="map_editor_container">
					<div id="map_editor"></div>
					<div id="map_editor_loading">
						Map Loading
					</div>
				</div>
				<div id="map_list">
					<ul class="sortable">
					</ul>
				</div>
			</div>
		</div>
	</body>
</html> 